@using FirstControllerProject.Models;
@model List<StudentDetails>;
@{
    ViewData["Title"] = "Index";
    
}

<div class="">
    <div>
        <h2>Students List</h2>
    </div>
    <div>
        <form method="get" asp-action="Index">
            <input type="text" name="search" placeholder="Search by name or email" autocomplete="off"
                   value="@ViewBag.Search" class="form-control" style="width:300px; display:inline-block;" />
            <button type="submit" class="btn btn-primary">Search</button>
        </form>
    </div>
</div>

<a asp-controller="Student" asp-action="AddEdit">Add Student</a>
<table class="table table-bordered">
    <tr>
        <td>Edit</td>
        <th>Id</th>
        <th>Name</th>
        <th>Age</th>
        <th>Email</th>
        <th>Actions</th>
        <th>Delete</th>
    </tr>
    @foreach (var s in Model)
    {
        <tr>
            <td>
                <a asp-action="EditData" asp-route-id="@s.Id">
                    <img src="~/Icons/edit.png" alt="Edit" style="width:20px; height:20px;" />
                </a>
            </td>
            <td>@s.Id</td>
            <td>@s.Name</td>
            <td>@s.Age</td>
            <td>@s.Email</td>
            <td>
                <a asp-action="Details" asp-route-id="@s.Id">Details</a>
            </td>
            <td>
                <a asp-action="DeleteRecord" asp-route-id="@s.Id">
                    <img src="~/Icons/clear.png" alt="Delete" style="width:20px; height:20px;" />
                </a>
            </td>
        </tr>
    }
    
</table>
<table>
    <tr>
        <td>
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <form asp-action="Index" method="get" class="form-inline">
                        <label for="pageSize" class="mr-2">Show</label>
                        <select id="pageSize" name="pageSize" class="form-control form-control-sm" onchange="this.form.submit()">
                            <option value="5" selected="@(ViewBag.PageSize == 5)">5</option>
                            <option value="10" selected="@(ViewBag.PageSize == 10)">10</option>
                            <option value="20" selected="@(ViewBag.PageSize == 20)">20</option>
                        </select>
                        <label class="small text-muted">per page</label>
                        <input type="hidden" name="pageNumber" value="1" />
                    </form>
                </div>
            </div>
        </td>
        <td>
            <div class="pagination-container text-center mt-3">
                <nav>
                    <ul class="pagination pagination-sm justify-content-center">
                        @for (int i = 1; i <= ViewBag.TotalPages; i++)
                        {
                            <li class="page-item @(i == ViewBag.CurrentPage ? "active" : "")">
                                <a class="page-link" asp-action="Index" asp-route-pageNumber="@i" asp-route-pageSize="@ViewBag.PageSize">
                                    @i
                                </a>
                            </li>
                        }
                    </ul>
                </nav>
                <p class="small text-muted">Page @ViewBag.CurrentPage of @ViewBag.TotalPages</p>
            </div>
        </td>
    </tr>
   
</table>

